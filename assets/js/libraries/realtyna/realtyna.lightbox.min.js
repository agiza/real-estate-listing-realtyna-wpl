(function(c,b,a,d){c._realtyna.lightbox={version:"1.2.9"};c._realtyna.lightbox=c.fn._realtyna.lightbox=function(m,h){var r={minWidth:100,minHeight:100,maxWidth:9999,maxHeight:9999,width:800,height:500,autoSize:true,showLoading:true,reloadPage:false,clearContent:true,loading:{color:"#000"},addTo:"body",ajaxType:"POST",ajaxDataType:"html",ajaxData:{},cssClasses:{lock:"realtyna-lightbox-lock",overlay:"realtyna-lightbox-overlay",wrap:"realtyna-lightbox-wp",title:"realtyna-lightbox-title",content:"realtyna-lightbox-cnt",close:"realtyna-lightbox-close-btn",error:"realtyna-lightbox-error",ajax:"realtyna-lightbox-ajax",placeholder:"realtyna-lightbox-placeholder"},effects:{fadeIn:"wpl-fx-fadeIn",fadeOut:"wpl-fx-fadeOut",showOverlay:"wpl-fx-fadeIn",showBox:"wpl-fx-fadeInBottom",hideBox:"wpl-fx-fadeOutBottom"},errors:{notFound:"Selected content not found!",unexpected:"An unexpected error happen. Please try again."},callbacks:{beforeOpen:null,afterOpen:null,afterShow:null,afterClose:null}};var i=Realtyna,n=this,w=m,t={},I=null,f=null,j=null,v=false,k=false,E=false,G=null,o=null,u=null,D=null,q=null,A=null,K=null,C=null,F=null,s=null,g="inline",e={overlay:"realtyna-js-lightbox-overlay",wrap:"realtyna-js-lightbox-wrapper",content:"realtyna-js-lightbox-content",closeBtn:"realtyna-js-lightbox-close"};n._beforeOpen=[];n._afterOpen=[];n._afterShow=[];n._afterClose=[];n.initialize=function(L,M){t=c.extend(true,{},r,L);I=t.cssClasses;f=t.effects;j=I.placeholder;if(typeof M!="undefined"&&M){w.off("click.realtyna-lightbox").on("click.realtyna-lightbox",function(N){if(!E){N.preventDefault();n.open(c(this),N)}})}};n.open=function(M){E=true;var L=M;var N=n.getInlineOptions(L.attr("data-realtyna-lightbox-opts"));t=N?c.extend({},t,N):t;p(function(){g=x(L);switch(g){case"inline":z(L);break;case"ajax":H(L);break;default:return false}})};n.trigger=function(M){var O=t.callbacks,L=n["_"+M];if(O.hasOwnProperty(M)&&O[M]!==null){L.unshift(O[M])}for(var N=0;N<L.length;++N){L[N].call()}return true};n.getInlineOptions=function(L){if(!L){return false}return i.options2JSON(L)};n._error=function(L){K=c("<div/>").text(L).addClass(I.error);K.invisible().appendTo(D);v=true;n.trigger("beforeOpen");l();o.unbind("onShow").bind("onShow",function(){K.visible().hide().fadeIn();i.ajaxLoader.hide(q);n.trigger("afterShow");E=false;k=true})};var y=h||{};n.initialize(y,true);c._realtyna.lightbox.open=function(M,N){var L=N||{};w=i.isQuery(M)?M:c(M);if(w.length>1){return false}n.initialize(L);return n.open(w)};c._realtyna.lightbox.close=function(){if(v){o.trigger("onReset");v=false;k=false;E=false;n._beforeOpen=[];n._afterOpen=[];n._afterShow=[];n._afterClose=[];c("html").removeClass(I.lock);c(o).removeClass(f.showBox).addClass(f.hideBox);c(G).fadeOut(600,function(){J();c(this).remove();n.trigger("afterClose");if(t.reloadPage){location.reload()}});return true}return false};c._realtyna.lightbox.on=function(N,M){var L="_"+N;if(n.hasOwnProperty(L)){n[L].push(M)}};function p(L){c("html").addClass(I.lock);G=c("<div />").attr("id",e.overlay).addClass(I.overlay);o=c("<div />").attr("id",e.wrap).addClass(I.wrap);o.appendTo(G).addClass(f.showBox);u=c("<div />").attr("id",e.closeBtn).addClass(I.close);u.hide().appendTo(o);D=c("<div />").attr("id",e.content).addClass(I.content);D.appendTo(o);G.appendTo(t.addTo);B();n.trigger("beforeOpen");l();if(t.showLoading){q=i.ajaxLoader.show(o,"normal","center",false,t.loading.color)}L.call()}function l(){var M=i.getBrowserSizes().browser(),Q,P,L,O;if(v){var N=K.css("position");K.css({position:"absolute"});if(t.autoSize){O=K.not("script, style").eq(0).outerWidth();L=K.not("script, style").eq(0).outerHeight()}else{O=t.width;L=t.height}K.css({position:(N==="static")?"":N});O=Math.min(O+2,t.maxWidth);L=Math.min(L+2,t.maxHeight);Q=M.width/2-O/2;P=Math.max(M.height/2-L/2,40);if(!k){o.animate({left:Q,top:P,width:O,height:L},450);setTimeout(function(){o.css({height:(t.autoSize)?"auto":L});G.css({overflowY:"auto"});o.trigger("onShow");n.trigger("afterOpen")},600)}else{o.css({height:(t.autoSize)?"auto":L,left:Q,top:P,width:O})}}else{o.css({width:100,height:100,left:M.width/2-50,top:M.height/2-50})}return true}function x(M){var L;if(typeof M.attr("href")!="undefined"){L=M.attr("href")}else{if(typeof M.attr("data-realtyna-href")!="undefined"){L=M.attr("data-realtyna-href")}else{c._realtyna.lightbox.close()}}if(L.length>0){if(L[0]=="#"){return"inline"}else{return"ajax"}}}function B(){c(G).on("click.realtyna-lightbox",function(M){var L=c(M.target);if(!L.hasClass(I.wrap)&&L.parents("."+I.wrap).length==0){c._realtyna.lightbox.close()}});c(u).on("click.realtyna-lightbox",function(L){L.preventDefault();c._realtyna.lightbox.close()});c(b).on("resize.realtyna-lightbox",function(){b.resizeEvt;c(b).on("resize.realtyna-lightbox",function(){clearTimeout(b.resizeEvt);b.resizeEvt=setTimeout(function(){l()},250)})});c(a).on("keydown.realtyna-lightbox",function(L){if((L.which||L.keyCode)===27){L.preventDefault();c._realtyna.lightbox.close()}})}function J(){c(b).off("resize.realtyna-lightbox");c(a).off("keydown.realtyna-lightbox")}function z(M){var L=/^#[a-z]+[\w-]*$/gi;F=M.attr("href")||M.attr("data-realtyna-href");if(!L.test(F)){return}A=c(F);if(A.length===0){n._error(t.errors.notFound);return}if(!A.data(j)){A.data(j,c('<div class="'+j+'"></div>').insertAfter(A).hide())}A=A.show().invisible().detach();v=true;c(D).append(A);o.bind("onReset",function(){if(c(this).find(A).length){if(t.autoSize){o.height(A.outerHeight())}A.hide().replaceAll(A.data(j)).data(j,false);if(t.clearContent){A.html("")}}});o.bind("onShow",function(){A.visible().hide().fadeIn();u.fadeIn();i.ajaxLoader.hide(q);E=false;k=true});s=setInterval(function(){if(A.children().length>0){clearInterval(s);K=A.children();l()}},300)}function H(M){var L=t.ajaxData=M.attr("data-realtyna-lightbox-data")||{};F=M.attr("href")||M.attr("data-realtyna-href");c.ajax({type:t.ajaxType,dataType:t.ajaxDataType,url:F,data:L,error:function(N,O){n._error(t.errors.unexpected)},success:function(N,O){if(O==="success"){A=c("<div/>").addClass(I.ajax).html(N);K=A.children();v=true;n.trigger("beforeOpen");D.append(A.show().invisible());l()}}});o.bind("onShow",function(){A.visible().hide().fadeIn();u.fadeIn();i.ajaxLoader.hide(q);E=false;k=true})}}})(jQuery,window,document);